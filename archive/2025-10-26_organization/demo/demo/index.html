<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - The Vape Shed Supplier Portal (Demo)</title>
    
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5.3 CSS - Required for Grid System -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome 6.0 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Professional Black Theme - MUST BE AFTER Bootstrap -->
    <link rel="stylesheet" href="/supplier/assets/css/professional-black.css">
    
    <!-- Demo-Specific Additions (Timeline, Widgets, etc.) -->
    <link rel="stylesheet" href="assets/css/demo-additions.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
<div class="page">
    
    <!-- ============================================================================
         PROFESSIONAL BLACK SIDEBAR
         ========================================================================== -->
    <aside class="navbar-vertical">
        <div class="navbar-brand">
            <img src="/supplier/assets/images/logo.jpg" alt="The Vape Shed" class="brand-logo">
        </div>
        
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <i class="fa-solid fa-chart-line nav-link-icon"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="orders.html">
                    <i class="fa-solid fa-shopping-cart nav-link-icon"></i>
                    <span>Purchase Orders</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="warranty.html">
                    <i class="fa-solid fa-wrench nav-link-icon"></i>
                    <span>Warranty Claims</span>
                    <span class="badge bg-red ms-auto">5</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="downloads.html">
                    <i class="fa-solid fa-download nav-link-icon"></i>
                    <span>Downloads</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="reports.html">
                    <i class="fa-solid fa-chart-bar nav-link-icon"></i>
                    <span>30-Day Reports</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="account.html">
                    <i class="fa-solid fa-user-circle nav-link-icon"></i>
                    <span>Account Settings</span>
                </a>
            </li>
        </ul>
        
        <!-- ============================================================================
             SIDEBAR QUICK STATS - Recent Activity Widget
             ========================================================================== -->
        <div class="sidebar-widget mt-4 px-3">
            <h6 class="sidebar-widget-title text-muted text-uppercase mb-3" style="font-size: 11px; letter-spacing: 0.5px;">
                Recent Activity
            </h6>
            
            <div class="sidebar-activity">
                <div class="sidebar-activity-item">
                    <div class="activity-dot bg-primary"></div>
                    <div class="activity-text">
                        <div class="activity-title">New Order</div>
                        <div class="activity-time">3h ago</div>
                    </div>
                </div>
                
                <div class="sidebar-activity-item">
                    <div class="activity-dot bg-info"></div>
                    <div class="activity-text">
                        <div class="activity-title">Processing</div>
                        <div class="activity-time">5h ago</div>
                    </div>
                </div>
                
                <div class="sidebar-activity-item">
                    <div class="activity-dot bg-warning"></div>
                    <div class="activity-text">
                        <div class="activity-title">Warranty Claim</div>
                        <div class="activity-time">1d ago</div>
                    </div>
                </div>
                
                <div class="sidebar-activity-item">
                    <div class="activity-dot bg-success"></div>
                    <div class="activity-text">
                        <div class="activity-title">Delivered</div>
                        <div class="activity-time">2d ago</div>
                    </div>
                </div>
            </div>
            
            <hr class="my-3" style="border-color: rgba(255,255,255,0.1);">
            
            <h6 class="sidebar-widget-title text-muted text-uppercase mb-3" style="font-size: 11px; letter-spacing: 0.5px;">
                Quick Stats
            </h6>
            
            <div class="sidebar-stat-item">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="text-muted" style="font-size: 12px;">Active Orders</span>
                    <strong style="font-size: 14px;">127</strong>
                </div>
                <div class="progress" style="height: 4px;">
                    <div class="progress-bar bg-primary" style="width: 75%"></div>
                </div>
            </div>
            
            <div class="sidebar-stat-item mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="text-muted" style="font-size: 12px;">Stock Health</span>
                    <strong class="text-success" style="font-size: 14px;">92%</strong>
                </div>
                <div class="progress" style="height: 4px;">
                    <div class="progress-bar bg-success" style="width: 92%"></div>
                </div>
            </div>
            
            <div class="sidebar-stat-item mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="text-muted" style="font-size: 12px;">This Month</span>
                    <strong class="text-info" style="font-size: 14px;">$284K</strong>
                </div>
                <div class="progress" style="height: 4px;">
                    <div class="progress-bar bg-info" style="width: 87%"></div>
                </div>
            </div>
        </div>
    </aside>
    
    <!-- ============================================================================
         PAGE WRAPPER WITH TWO-LAYER HEADER
         ========================================================================== -->
    <div class="page-wrapper">
        
        <!-- ============================================================================
             HEADER TOP LAYER - Branding, Notifications, User
             ========================================================================== -->
        <header class="header-top">
            <div class="header-top-left">
                <h2 class="header-title">Dashboard</h2>
                <p class="header-subtitle">Welcome back, ACME Vape Co.</p>
            </div>
            
            <div class="header-top-right">
                <!-- Search -->
                <button class="header-action-btn" title="Search">
                    <i class="fa-solid fa-search"></i>
                </button>
                
                <!-- Notifications -->
                <button class="header-action-btn" title="Notifications">
                    <i class="fa-solid fa-bell"></i>
                    <span class="badge-notification"></span>
                </button>
                
                <!-- User Dropdown -->
                <div class="user-dropdown">
                    <img src="https://ui-avatars.com/api/?name=ACME+Vape+Co&background=3b82f6&color=fff&size=40" 
                         alt="ACME Vape Co." 
                         class="user-avatar">
                    <div class="user-info">
                        <p class="user-name">ACME Vape Co.</p>
                        <p class="user-role">Supplier Account</p>
                    </div>
                    <i class="fa-solid fa-chevron-down ms-2"></i>
                </div>
            </div>
        </header>
        
        <!-- ============================================================================
             HEADER BOTTOM LAYER - Breadcrumb, Page Actions
             ========================================================================== -->
        <header class="header-bottom">
            <div class="breadcrumb-nav">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="index.html">
                            <i class="fa-solid fa-home"></i>
                        </a>
                    </li>
                    <li class="breadcrumb-separator">/</li>
                    <li class="breadcrumb-item active">Dashboard</li>
                </ul>
            </div>
            
            <div class="header-bottom-actions">
                <button class="btn btn-light">
                    <i class="fa-solid fa-calendar-alt"></i>
                    Last 30 Days
                </button>
                <button class="btn btn-light">
                    <i class="fa-solid fa-download"></i>
                    Export Report
                </button>
                <a href="orders.html" class="btn btn-primary">
                    <i class="fa-solid fa-plus"></i>
                    New Order
                </a>
            </div>
        </header>
        
        <!-- ============================================================================
             MAIN CONTENT BODY
             ========================================================================== -->
        <div class="page-body">
            
            <!-- ============================================================================
                 METRIC CARDS - 6 Key Performance Indicators
                 ========================================================================== -->
            <div class="row g-3 mb-4">
                <!-- Total Orders (with percentage) -->
                <div class="col-md-6 col-xl-4">
                    <div class="card metric-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <div>
                                    <p class="text-muted mb-1 small">Total Orders (30d)</p>
                                    <h3 class="mb-0 fw-bold">127</h3>
                                </div>
                                <div class="metric-icon bg-primary">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                            </div>
                            <div class="progress" style="height: 6px;">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 78%"></div>
                            </div>
                            <p class="text-success mb-0 small mt-2">
                                <i class="fas fa-arrow-up me-1"></i>
                                <strong>+12%</strong> vs last month (78% of target)
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Active Products -->
                <div class="col-md-6 col-xl-4">
                    <div class="card metric-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <div>
                                    <p class="text-muted mb-1 small">Active Products</p>
                                    <h3 class="mb-0 fw-bold">342</h3>
                                </div>
                                <div class="metric-icon bg-info">
                                    <i class="fas fa-box"></i>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="small text-muted">In Stock: 327</span>
                                <span class="small text-warning fw-semibold">Low Stock: 15</span>
                            </div>
                            <p class="text-muted mb-0 small mt-2">
                                <i class="fas fa-check-circle text-success me-1"></i>
                                95.6% availability rate
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Pending Claims -->
                <div class="col-md-6 col-xl-4">
                    <div class="card metric-card clickable" style="cursor: pointer;">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <div>
                                    <p class="text-muted mb-1 small">Pending Claims</p>
                                    <h3 class="mb-0 fw-bold">5</h3>
                                </div>
                                <div class="metric-icon bg-warning">
                                    <i class="fas fa-wrench"></i>
                                </div>
                            </div>
                            <div class="d-flex gap-2">
                                <span class="badge bg-danger">2 Urgent</span>
                                <span class="badge bg-warning">3 Standard</span>
                            </div>
                            <p class="text-danger mb-0 small mt-2">
                                <i class="fas fa-exclamation-circle me-1"></i>
                                +2 this week - Action required
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Average Order Value -->
                <div class="col-md-6 col-xl-4">
                    <div class="card metric-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <div>
                                    <p class="text-muted mb-1 small">Avg Order Value</p>
                                    <h3 class="mb-0 fw-bold">$2,241</h3>
                                </div>
                                <div class="metric-icon bg-success">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                            </div>
                            <div class="progress" style="height: 6px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 89%"></div>
                            </div>
                            <p class="text-success mb-0 small mt-2">
                                <i class="fas fa-arrow-up me-1"></i>
                                <strong>+5.7%</strong> vs last month (89% of target)
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Units Sold -->
                <div class="col-md-6 col-xl-4">
                    <div class="card metric-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <div>
                                    <p class="text-muted mb-1 small">Units Sold (30d)</p>
                                    <h3 class="mb-0 fw-bold">8,547</h3>
                                </div>
                                <div class="metric-icon bg-cyan">
                                    <i class="fas fa-cubes"></i>
                                </div>
                            </div>
                            <div class="progress" style="height: 6px;">
                                <div class="progress-bar bg-cyan" role="progressbar" style="width: 85%"></div>
                            </div>
                            <p class="text-success mb-0 small mt-2">
                                <i class="fas fa-arrow-up me-1"></i>
                                <strong>+14.2%</strong> vs last month (85% of target)
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Avg Days to Deliver -->
                <div class="col-md-6 col-xl-4">
                    <div class="card metric-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <div>
                                    <p class="text-muted mb-1 small">Avg Fulfillment Time</p>
                                    <h3 class="mb-0 fw-bold">3.2 days</h3>
                                </div>
                                <div class="metric-icon bg-purple">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="small text-muted">Target: 3 days</span>
                                <span class="small text-success fw-semibold">Within SLA</span>
                            </div>
                            <p class="text-success mb-0 small mt-2">
                                <i class="fas fa-arrow-down me-1"></i>
                                <strong>-0.5 days</strong> improved this month
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ============================================================================
                 ORDERS REQUIRING ACTION - Compact Table with Pagination
                 ========================================================================== -->
            <div class="row g-3 mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-0">Orders Requiring Action</h5>
                                <small class="text-muted">Processing & Packing Required (127 total orders)</small>
                            </div>
                            <div class="d-flex gap-2">
                                <button class="btn btn-sm btn-success">
                                    <i class="fas fa-file-archive me-1"></i>
                                    Download All as ZIP
                                </button>
                                <button class="btn btn-sm btn-primary">
                                    <i class="fas fa-file-csv me-1"></i>
                                    Export All to CSV
                                </button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-sm table-hover compact-table mb-0">
                                    <thead class="table-header-sticky">
                                        <tr>
                                            <th style="width: 100px;">PO Number</th>
                                            <th style="width: 120px;">Outlet</th>
                                            <th style="width: 90px;">Status</th>
                                            <th style="width: 80px;" class="text-center">Items</th>
                                            <th style="width: 80px;" class="text-center">Units</th>
                                            <th style="width: 90px;" class="text-end">Value</th>
                                            <th style="width: 100px;">Order Date</th>
                                            <th style="width: 100px;">Due Date</th>
                                            <th style="width: 140px;" class="text-center">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Row 1 - Critical Priority -->
                                        <tr class="priority-high">
                                            <td><strong>JCE-PO-12851</strong></td>
                                            <td>Hamilton Central</td>
                                            <td><span class="badge badge-sm bg-warning">Processing</span></td>
                                            <td class="text-center">18</td>
                                            <td class="text-center">245</td>
                                            <td class="text-end">$4,890</td>
                                            <td>Oct 23, 2025</td>
                                            <td class="text-danger"><strong>Oct 26, 2025</strong></td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 2 -->
                                        <tr>
                                            <td><strong>JCE-PO-12850</strong></td>
                                            <td>Auckland CBD</td>
                                            <td><span class="badge badge-sm bg-warning">Processing</span></td>
                                            <td class="text-center">12</td>
                                            <td class="text-center">178</td>
                                            <td class="text-end">$3,560</td>
                                            <td>Oct 23, 2025</td>
                                            <td>Oct 27, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 3 -->
                                        <tr>
                                            <td><strong>JCE-PO-12849</strong></td>
                                            <td>Wellington</td>
                                            <td><span class="badge badge-sm bg-info">Pending</span></td>
                                            <td class="text-center">15</td>
                                            <td class="text-center">225</td>
                                            <td class="text-end">$4,275</td>
                                            <td>Oct 24, 2025</td>
                                            <td>Oct 28, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 4 -->
                                        <tr>
                                            <td><strong>JCE-PO-12848</strong></td>
                                            <td>Christchurch</td>
                                            <td><span class="badge badge-sm bg-warning">Processing</span></td>
                                            <td class="text-center">20</td>
                                            <td class="text-center">342</td>
                                            <td class="text-end">$6,840</td>
                                            <td>Oct 22, 2025</td>
                                            <td>Oct 26, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 5 -->
                                        <tr>
                                            <td><strong>JCE-PO-12847</strong></td>
                                            <td>Tauranga</td>
                                            <td><span class="badge badge-sm bg-warning">Processing</span></td>
                                            <td class="text-center">9</td>
                                            <td class="text-center">134</td>
                                            <td class="text-end">$2,680</td>
                                            <td>Oct 24, 2025</td>
                                            <td>Oct 28, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 6 -->
                                        <tr class="priority-high">
                                            <td><strong>JCE-PO-12846</strong></td>
                                            <td>Hamilton Central</td>
                                            <td><span class="badge badge-sm bg-warning">Processing</span></td>
                                            <td class="text-center">14</td>
                                            <td class="text-center">198</td>
                                            <td class="text-end">$3,960</td>
                                            <td>Oct 23, 2025</td>
                                            <td class="text-danger"><strong>Oct 26, 2025</strong></td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 7 -->
                                        <tr>
                                            <td><strong>JCE-PO-12845</strong></td>
                                            <td>Auckland CBD</td>
                                            <td><span class="badge badge-sm bg-info">Pending</span></td>
                                            <td class="text-center">11</td>
                                            <td class="text-center">156</td>
                                            <td class="text-end">$3,120</td>
                                            <td>Oct 24, 2025</td>
                                            <td>Oct 28, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 8 -->
                                        <tr>
                                            <td><strong>JCE-PO-12844</strong></td>
                                            <td>Wellington</td>
                                            <td><span class="badge badge-sm bg-warning">Processing</span></td>
                                            <td class="text-center">17</td>
                                            <td class="text-center">267</td>
                                            <td class="text-end">$5,340</td>
                                            <td>Oct 23, 2025</td>
                                            <td>Oct 27, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 9 -->
                                        <tr>
                                            <td><strong>JCE-PO-12843</strong></td>
                                            <td>Dunedin</td>
                                            <td><span class="badge badge-sm bg-info">Pending</span></td>
                                            <td class="text-center">8</td>
                                            <td class="text-center">112</td>
                                            <td class="text-end">$2,240</td>
                                            <td>Oct 24, 2025</td>
                                            <td>Oct 29, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 10 -->
                                        <tr>
                                            <td><strong>JCE-PO-12842</strong></td>
                                            <td>Palmerston North</td>
                                            <td><span class="badge badge-sm bg-warning">Processing</span></td>
                                            <td class="text-center">13</td>
                                            <td class="text-center">189</td>
                                            <td class="text-end">$3,780</td>
                                            <td>Oct 23, 2025</td>
                                            <td>Oct 27, 2025</td>
                                            <td class="text-center">
                                                <button class="btn btn-xs btn-primary" title="Pack Order">
                                                    <i class="fas fa-box"></i>
                                                </button>
                                                <button class="btn btn-xs btn-success" title="Download CSV">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                                <button class="btn btn-xs btn-info" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-footer bg-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="text-muted small">
                                    Showing <strong>1-10</strong> of <strong>127</strong> orders
                                </div>
                                <nav>
                                    <ul class="pagination pagination-sm mb-0">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#" tabindex="-1">
                                                <i class="fas fa-chevron-left"></i>
                                            </a>
                                        </li>
                                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                                        <li class="page-item"><a class="page-link" href="#">4</a></li>
                                        <li class="page-item"><a class="page-link" href="#">5</a></li>
                                        <li class="page-item disabled"><a class="page-link" href="#">...</a></li>
                                        <li class="page-item"><a class="page-link" href="#">13</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="#">
                                                <i class="fas fa-chevron-right"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                                <div class="text-muted small">
                                    <select class="form-select form-select-sm" style="width: auto; display: inline-block;">
                                        <option value="10" selected>10 per page</option>
                                        <option value="25">25 per page</option>
                                        <option value="50">50 per page</option>
                                        <option value="100">100 per page</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ============================================================================
                 STOCK ALERTS - Critical Low Stock by Outlet
                 ========================================================================== -->
            <div class="row g-3 mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-0">
                                    <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                    Stock Alerts - Low Inventory by Store
                                </h5>
                                <p class="text-muted small mb-0 mt-1">Click any store to see which products need restocking</p>
                            </div>
                            <div class="d-flex gap-2">
                                <button class="btn btn-sm btn-light">
                                    <i class="fas fa-filter me-1"></i>
                                    Filter
                                </button>
                                <button class="btn btn-sm btn-warning">
                                    <i class="fas fa-bell me-1"></i>
                                    Set Alerts (8)
                                </button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="stock-alerts-grid">
                                <!-- Whakatane - Critical -->
                                <div class="stock-alert-card critical clickable">
                                    <div class="store-header">
                                        <div>
                                            <h6 class="store-name mb-0">
                                                <i class="fas fa-store-alt me-2"></i>
                                                Whakatane
                                            </h6>
                                            <span class="badge bg-danger mt-1">Critical</span>
                                        </div>
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-circle"></i>
                                        </div>
                                    </div>
                                    <div class="stock-metrics">
                                        <div class="metric">
                                            <span class="metric-value">1,483</span>
                                            <span class="metric-label">Low Stock Items</span>
                                        </div>
                                        <div class="metric">
                                            <span class="metric-value text-danger">347</span>
                                            <span class="metric-label">Out of Stock</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-danger btn-block mt-2">
                                        <i class="fas fa-box me-1"></i>
                                        View Products
                                    </button>
                                </div>
                                
                                <!-- Gisborne - High Alert -->
                                <div class="stock-alert-card high clickable">
                                    <div class="store-header">
                                        <div>
                                            <h6 class="store-name mb-0">
                                                <i class="fas fa-store-alt me-2"></i>
                                                Gisborne
                                            </h6>
                                            <span class="badge bg-warning text-dark mt-1">High</span>
                                        </div>
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                    </div>
                                    <div class="stock-metrics">
                                        <div class="metric">
                                            <span class="metric-value">1,332</span>
                                            <span class="metric-label">Low Stock Items</span>
                                        </div>
                                        <div class="metric">
                                            <span class="metric-value text-warning">289</span>
                                            <span class="metric-label">Out of Stock</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-warning btn-block mt-2">
                                        <i class="fas fa-box me-1"></i>
                                        View Products
                                    </button>
                                </div>
                                
                                <!-- Cambridge - Medium -->
                                <div class="stock-alert-card medium clickable">
                                    <div class="store-header">
                                        <div>
                                            <h6 class="store-name mb-0">
                                                <i class="fas fa-store-alt me-2"></i>
                                                Cambridge
                                            </h6>
                                            <span class="badge bg-info mt-1">Medium</span>
                                        </div>
                                        <div class="alert-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                    </div>
                                    <div class="stock-metrics">
                                        <div class="metric">
                                            <span class="metric-value">1,285</span>
                                            <span class="metric-label">Low Stock Items</span>
                                        </div>
                                        <div class="metric">
                                            <span class="metric-value text-info">145</span>
                                            <span class="metric-label">Out of Stock</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-info btn-block mt-2">
                                        <i class="fas fa-box me-1"></i>
                                        View Products
                                    </button>
                                </div>
                                
                                <!-- Huntly - Medium -->
                                <div class="stock-alert-card medium clickable">
                                    <div class="store-header">
                                        <div>
                                            <h6 class="store-name mb-0">
                                                <i class="fas fa-store-alt me-2"></i>
                                                Huntly
                                            </h6>
                                            <span class="badge bg-info mt-1">Medium</span>
                                        </div>
                                        <div class="alert-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                    </div>
                                    <div class="stock-metrics">
                                        <div class="metric">
                                            <span class="metric-value">1,279</span>
                                            <span class="metric-label">Low Stock Items</span>
                                        </div>
                                        <div class="metric">
                                            <span class="metric-value text-info">132</span>
                                            <span class="metric-label">Out of Stock</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-info btn-block mt-2">
                                        <i class="fas fa-box me-1"></i>
                                        View Products
                                    </button>
                                </div>
                                
                                <!-- Morrinsville - Medium -->
                                <div class="stock-alert-card medium clickable">
                                    <div class="store-header">
                                        <div>
                                            <h6 class="store-name mb-0">
                                                <i class="fas fa-store-alt me-2"></i>
                                                Morrinsville
                                            </h6>
                                            <span class="badge bg-info mt-1">Medium</span>
                                        </div>
                                        <div class="alert-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                    </div>
                                    <div class="stock-metrics">
                                        <div class="metric">
                                            <span class="metric-value">1,273</span>
                                            <span class="metric-label">Low Stock Items</span>
                                        </div>
                                        <div class="metric">
                                            <span class="metric-value text-info">128</span>
                                            <span class="metric-label">Out of Stock</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-info btn-block mt-2">
                                        <i class="fas fa-box me-1"></i>
                                        View Products
                                    </button>
                                </div>
                                
                                <!-- Browns Bay - Medium -->
                                <div class="stock-alert-card medium clickable">
                                    <div class="store-header">
                                        <div>
                                            <h6 class="store-name mb-0">
                                                <i class="fas fa-store-alt me-2"></i>
                                                Browns Bay
                                            </h6>
                                            <span class="badge bg-info mt-1">Medium</span>
                                        </div>
                                        <div class="alert-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                    </div>
                                    <div class="stock-metrics">
                                        <div class="metric">
                                            <span class="metric-value">1,245</span>
                                            <span class="metric-label">Low Stock Items</span>
                                        </div>
                                        <div class="metric">
                                            <span class="metric-value text-info">119</span>
                                            <span class="metric-label">Out of Stock</span>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-info btn-block mt-2">
                                        <i class="fas fa-box me-1"></i>
                                        View Products
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer bg-light">
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="text-muted small">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Showing stores with 1,000+ low stock items  Last updated 2 hours ago
                                </span>
                                <a href="#" class="btn btn-sm btn-primary">
                                    View All 27 Stores
                                    <i class="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ============================================================================
                 STOCK ALERT DASHBOARD - Critical Stock Warnings
                 ========================================================================== -->
            <div class="row g-3 mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-0">Stock Alerts by Outlet</h5>
                                <small class="text-muted">Products below minimum stock levels</small>
                            </div>
                            <a href="#" class="btn btn-sm btn-primary">
                                <i class="fas fa-exclamation-triangle me-1"></i>
                                View All Alerts
                            </a>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <!-- Critical Alert -->
                                <div class="col-md-6 col-xl-3">
                                    <div class="stock-alert-card critical">
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-circle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <h6 class="mb-1">Hamilton Central</h6>
                                            <p class="mb-0"><strong>3 products</strong> critically low</p>
                                            <small class="text-danger">Immediate action required</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Low Stock Alert -->
                                <div class="col-md-6 col-xl-3">
                                    <div class="stock-alert-card low">
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <h6 class="mb-1">Auckland CBD</h6>
                                            <p class="mb-0"><strong>2 products</strong> low stock</p>
                                            <small class="text-warning">Reorder recommended</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Warning Alert -->
                                <div class="col-md-6 col-xl-3">
                                    <div class="stock-alert-card warning">
                                        <div class="alert-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <h6 class="mb-1">Wellington</h6>
                                            <p class="mb-0"><strong>1 product</strong> approaching minimum</p>
                                            <small class="text-muted">Monitor closely</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Low Stock Alert -->
                                <div class="col-md-6 col-xl-3">
                                    <div class="stock-alert-card low">
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <h6 class="mb-1">Christchurch</h6>
                                            <p class="mb-0"><strong>2 products</strong> low stock</p>
                                            <small class="text-warning">Reorder recommended</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ============================================================================
                 ANALYTICS CHARTS - Items Sold & Warranty Claims
                 ========================================================================== -->
            <div class="row g-3 mb-4">
                <!-- Items Sold Last 3 Months -->
                <div class="col-xl-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Items Sold (Past 3 Months)</h5>
                            <small class="text-muted">Monthly unit sales trend</small>
                        </div>
                        <div class="card-body">
                            <canvas id="itemsSoldChart" height="120"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Warranty Claims Trend -->
                <div class="col-xl-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Warranty Claims Trend</h5>
                            <small class="text-muted">Last 6 months resolution status</small>
                        </div>
                        <div class="card-body">
                            <canvas id="warrantyChart" height="120"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
        </div><!-- /.page-body -->
        
    </div><!-- /.page-wrapper -->
    
</div><!-- /.page -->

<!-- Bootstrap 5.3 JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Notification Dropdown Toggle -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const notificationBtn = document.querySelector('.header-action-btn[title="Notifications"]');
    const notificationDropdown = document.getElementById('notificationDropdown');
    
    if (notificationBtn && notificationDropdown) {
        notificationBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            notificationDropdown.classList.toggle('show');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!notificationDropdown.contains(e.target) && e.target !== notificationBtn) {
                notificationDropdown.classList.remove('show');
            }
        });
        
        // Mark notification as read when clicked
        const notificationItems = notificationDropdown.querySelectorAll('.notification-item');
        notificationItems.forEach(item => {
            item.addEventListener('click', function() {
                this.classList.remove('unread');
            });
        });
    }
    
    // Stock alert card click handler
    const stockCards = document.querySelectorAll('.stock-alert-card');
    stockCards.forEach(card => {
        card.addEventListener('click', function() {
            const outlet = this.querySelector('h6').textContent;
            alert(`Viewing low stock details for ${outlet}\n\nThis would open a modal showing:\n- All products below minimum stock\n- Current quantities\n- Reorder suggestions\n- Quick order actions`);
        });
    });
    
    // Download All as ZIP handler
    const downloadZipBtn = document.querySelector('.btn-success');
    if (downloadZipBtn && downloadZipBtn.textContent.includes('ZIP')) {
        downloadZipBtn.addEventListener('click', function() {
            alert('Downloading all orders as ZIP...\n\nWould include:\n- 127 order CSV files\n- Combined master spreadsheet\n- Packing lists for each order\n- Summary report\n\nFile size: ~2.4 MB');
        });
    }
    
    // Export All CSV handler
    const exportAllBtn = document.querySelector('.btn-primary');
    if (exportAllBtn && exportAllBtn.textContent.includes('Export All')) {
        exportAllBtn.addEventListener('click', function() {
            alert('Exporting all orders to CSV...\n\nColumns:\n- PO Number, Outlet, Status, Items, Units, Value, Order Date, Due Date\n\nRows: 127 orders\n\nDownloading: orders_export_2025-10-25.csv');
        });
    }
    
    // Individual order CSV download
    const downloadCsvBtns = document.querySelectorAll('.btn-success[title="Download CSV"]');
    downloadCsvBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const row = this.closest('tr');
            const poNumber = row.querySelector('td:first-child strong').textContent;
            const outlet = row.querySelector('td:nth-child(2)').textContent;
            alert(`Downloading order CSV: ${poNumber}\n\nOutlet: ${outlet}\n\nFile will contain:\n- Line items with SKU, Product Name, Quantity\n- Pricing details\n- Special instructions\n- Packing notes\n\nFilename: ${poNumber}_${outlet.replace(/\s/g, '_')}.csv`);
        });
    });
    
    // Pack Order button
    const packBtns = document.querySelectorAll('.btn-primary[title="Pack Order"]');
    packBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const row = this.closest('tr');
            const poNumber = row.querySelector('td:first-child strong').textContent;
            alert(`Opening packing interface for ${poNumber}\n\nFeatures:\n- Scan products as packed\n- Add tracking number\n- Mark items as substituted/unavailable\n- Add packing notes\n- Generate shipping label\n- Update status to "Packed"`);
        });
    });
    
    // View Details button
    const viewBtns = document.querySelectorAll('.btn-info[title="View Details"]');
    viewBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const row = this.closest('tr');
            const poNumber = row.querySelector('td:first-child strong').textContent;
            alert(`Viewing order details: ${poNumber}\n\nWould show:\n- Complete line item list\n- Product images and details\n- Customer special requests\n- Delivery address\n- Historical orders from this outlet\n- Communication log`);
        });
    });
    
    // Pagination
    const pageLinks = document.querySelectorAll('.pagination .page-link');
    pageLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            if (!this.closest('.page-item').classList.contains('disabled') && 
                !this.closest('.page-item').classList.contains('active')) {
                alert('Loading next page of orders...\n\n(In production, this would load via AJAX)');
            }
        });
    });
    
    // Per page selector
    const perPageSelect = document.querySelector('.form-select-sm');
    if (perPageSelect) {
        perPageSelect.addEventListener('change', function() {
            alert(`Changing to ${this.value} orders per page...\n\n(In production, this would reload the table)`);
        });
    }
});
</script>

<!-- Chart.js Initialization -->
<script>
/**
 * ITEMS SOLD CHART (Past 3 Months)
 * Data Source: sales_velocity_monthly
 * Shows monthly unit sales trend
 */
const itemsSoldCtx = document.getElementById('itemsSoldChart').getContext('2d');
const itemsSoldChart = new Chart(itemsSoldCtx, {
    type: 'line',
    data: {
        labels: ['August 2025', 'September 2025', 'October 2025'],
        datasets: [{
            label: 'Units Sold',
            data: [7834, 8291, 8547],
            borderColor: '#3b82f6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointRadius: 5,
            pointHoverRadius: 7
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                display: false
            },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return context.parsed.y.toLocaleString() + ' units sold';
                    }
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                ticks: {
                    callback: function(value) {
                        return (value / 1000).toFixed(1) + 'k';
                    }
                }
            }
        }
    }
});

/**
 * WARRANTY CLAIMS CHART (Last 6 Months)
 * Data Source: warranty_claims
 * Shows claim volume and resolution status
 */
const warrantyCtx = document.getElementById('warrantyChart').getContext('2d');
const warrantyChart = new Chart(warrantyCtx, {
    type: 'bar',
    data: {
        labels: ['May', 'June', 'July', 'August', 'September', 'October'],
        datasets: [
            {
                label: 'Pending',
                data: [2, 3, 1, 2, 5, 3],
                backgroundColor: '#fbbf24',
                stack: 'stack1'
            },
            {
                label: 'Approved',
                data: [5, 4, 6, 7, 5, 8],
                backgroundColor: '#10b981',
                stack: 'stack1'
            },
            {
                label: 'Rejected',
                data: [1, 2, 1, 0, 1, 1],
                backgroundColor: '#ef4444',
                stack: 'stack1'
            },
            {
                label: 'Resolved',
                data: [12, 11, 14, 13, 15, 16],
                backgroundColor: '#6b7280',
                stack: 'stack1'
            }
        ]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                display: true,
                position: 'bottom'
            },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return context.dataset.label + ': ' + context.parsed.y + ' claims';
                    }
                }
            }
        },
        scales: {
            x: {
                stacked: true
            },
            y: {
                stacked: true,
                beginAtZero: true
            }
        }
    }
});

/**
 * AVERAGE FULFILLMENT TIME CHART
 * Data Source: purchase_orders (date_created -> date_delivered)
 * Shows days from order to delivery trend
 */
const fulfillmentCtx = document.getElementById('fulfillmentChart').getContext('2d');
const fulfillmentChart = new Chart(fulfillmentCtx, {
    type: 'line',
    data: {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
        datasets: [{
            label: 'Average Days',
            data: [3.2, 2.8, 3.5, 2.9, 3.1, 2.7],
            borderColor: '#10b981',
            backgroundColor: 'rgba(16, 185, 129, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointRadius: 5,
            pointHoverRadius: 7
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                display: false
            },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return context.parsed.y.toFixed(1) + ' days average';
                    }
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                max: 5,
                ticks: {
                    callback: function(value) {
                        return value.toFixed(1) + ' days';
                    }
                }
            }
        }
    }
});
</script>

</body>
</html>
