<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">PO Detail - The Vape Shed Supplier Portal (Demo)</title>
    
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome 6.0 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Professional Black Theme -->
    <link rel="stylesheet" href="/supplier/assets/css/professional-black.css">
    
    <!-- Demo Additions -->
    <link rel="stylesheet" href="assets/css/demo-additions.css">
    
    <style>
        .po-header-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        .action-card {
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .action-card:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        .action-card i {
            font-size: 32px;
            margin-bottom: 12px;
            color: #6b7280;
        }
        .action-card:hover i {
            color: #3b82f6;
        }
        .item-row {
            padding: 16px;
            border-bottom: 1px solid #f3f4f6;
            transition: background 0.2s;
        }
        .item-row:hover {
            background: #f9fafb;
        }
        .qty-input {
            width: 80px;
            text-align: center;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 4px 8px;
        }
        .qty-input:focus {
            border-color: #3b82f6;
            outline: none;
        }
        .substitute-badge {
            background: #fef3c7;
            color: #92400e;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }
        .notes-section {
            background: #f9fafb;
            border-left: 4px solid #3b82f6;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        .timeline-item {
            position: relative;
            padding-bottom: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 0;
            width: 12px;
            height: 12px;
            background: #3b82f6;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #e5e7eb;
        }
        .timeline-item::after {
            content: '';
            position: absolute;
            left: -19px;
            top: 12px;
            width: 2px;
            height: calc(100% - 12px);
            background: #e5e7eb;
        }
        .timeline-item:last-child::after {
            display: none;
        }
    </style>
</head>
<body>

<!-- Header will be loaded here by JavaScript -->

<!-- PAGE CONTENT -->
<div style="display:none;" id="page-content">
    
    <!-- Back Button -->
    <div class="mb-3">
        <a href="orders-new.html" class="btn btn-light btn-sm">
            <i class="fa-solid fa-arrow-left"></i> Back to Purchase Orders
        </a>
    </div>
    
    <!-- Info Bar (Black Header) -->
    <div style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <!-- Black header bar -->
        <div style="background: #000000; color: white; padding: 10px 30px;">
            <div style="display: flex; justify-content: space-between; align-items: start;">
                <!-- Left Side: PO Number -->
                <div>
                    <div style="font-size: 22px; font-weight: 800; color: #fbbf24; margin-bottom: 6px;">PURCHASE ORDER: #JCE-PO-12851</div>
                    <div style="display: flex; align-items: center; gap: 15px; font-size: 13px; font-weight: 600;">
                        <span><i class="fa-solid fa-calendar"></i> Order: Oct 23, 2025</span>
                        <div style="width: 1px; height: 16px; background: rgba(255, 255, 255, 0.3);"></div>
                        <span><i class="fa-solid fa-calendar-check"></i> Due: Oct 26, 2025</span>
                        <div style="width: 1px; height: 16px; background: rgba(255, 255, 255, 0.3);"></div>
                        <span><i class="fa-solid fa-box"></i> 18 items â€¢ 245 units</span>
                    </div>
                </div>
                
                <!-- Right Side: Store Info -->
                <div style="text-align: right;">
                    <div style="font-size: 24px; font-weight: 800; margin-bottom: 4px;">Hamilton East</div>
                    <div style="font-size: 13px; font-weight: 700; color: #fbbf24; letter-spacing: 0.5px;">STORE CODE: HAM-EAST</div>
                </div>
            </div>
        </div>
        
        <!-- Grey section: Store status + Amount -->
        <div style="padding: 10px 30px; border-bottom: 1px solid #e5e7eb; background: #f9fafb;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: center; font-size: 14px;">
                    <span style="display: flex; align-items: center; gap: 6px; color: #1a1a1a;">
                        <i class="fa-solid fa-circle" style="font-size: 8px; color: #22c55e;"></i>
                        <strong>Open Now</strong>
                    </span>
                    <div style="width: 1px; height: 20px; background: #d1d5db;"></div>
                    <span style="display: flex; align-items: center; gap: 6px; color: #1a1a1a;">
                        <i class="fa-solid fa-star" style="color: #fbbf24;"></i>
                        <strong>4.8</strong> (491 reviews)
                    </span>
                    <div style="width: 1px; height: 20px; background: #d1d5db;"></div>
                    <span style="color: #1a1a1a;">
                        <strong>Order Date:</strong> Oct 23, 2025
                    </span>
                    <div style="width: 1px; height: 20px; background: #d1d5db;"></div>
                    <span style="color: #1a1a1a;">
                        <strong>Due Date:</strong> Oct 26, 2025
                    </span>
                    <div style="width: 1px; height: 20px; background: #d1d5db;"></div>
                    <span style="background: #000; color: white; padding: 6px 12px; border-radius: 6px; font-weight: 700; font-size: 12px;">Processing</span>
                </div>
                <div style="font-size: 18px; font-weight: 800; color: #1a1a1a;">$4,890.00</div>
            </div>
        </div>
        
        <!-- White section: Address -->
        <div style="padding: 10px 30px; background: white;">
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 20px; font-size: 14px;">
                <span style="display: flex; align-items: center; gap: 6px; color: #1a1a1a;">
                    <i class="fa-solid fa-map-marker-alt" style="color: #fbbf24;"></i>
                    <strong>419 Grey Street, Hamilton East, Hamilton, 3216, New Zealand</strong>
                </span>
                <button onclick="copyAddress('419 Grey Street, Hamilton East, Hamilton, 3216, New Zealand')" style="background: transparent; color: #9ca3af; border: 1px solid #d1d5db; padding: 6px 12px; border-radius: 6px; font-weight: 600; font-size: 12px; cursor: pointer; transition: all 0.2s;">
                    <i class="fa-solid fa-copy"></i> Copy
                </button>
            </div>
        </div>
    </div>
    
    <!-- Delivery Address Card -->
    <div style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 24px; border: 2px solid #fbbf24;">
        <div style="background: #fbbf24; padding: 12px 24px;">
            <div style="font-size: 15px; font-weight: 800; color: #1a1a1a;">
                <i class="fa-solid fa-map-marker-alt"></i> DELIVERY ADDRESS
            </div>
        </div>
        <div style="padding: 20px 24px;">
            <div style="font-size: 18px; font-weight: 800; color: #1a1a1a; margin-bottom: 8px;">The Vape Shed - Hamilton East</div>
            <div style="font-size: 15px; color: #4b5563; line-height: 1.6;">
                419 Grey Street<br>
                Hamilton East<br>
                Hamilton 3216<br>
                New Zealand
            </div>
        </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="row g-3 mb-4">
        <div class="col-md-3">
            <div class="action-card" onclick="uploadInvoice()">
                <i class="fa-solid fa-file-invoice"></i>
                <h6 class="mb-1">Upload Invoice</h6>
                <small class="text-muted">PDF, JPG, PNG</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="action-card" onclick="submitTracking()">
                <i class="fa-solid fa-truck"></i>
                <h6 class="mb-1">Submit Tracking</h6>
                <small class="text-muted">Add tracking number</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="action-card" onclick="markComplete()">
                <i class="fa-solid fa-check-circle"></i>
                <h6 class="mb-1">Mark as Sent</h6>
                <small class="text-muted">Update status</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="action-card" onclick="downloadPDF()">
                <i class="fa-solid fa-download"></i>
                <h6 class="mb-1">Download PDF</h6>
                <small class="text-muted">PO document</small>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-lg-8">
            <!-- Order Items -->
            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">Order Items</h5>
                    <small class="text-muted">Edit quantities or propose substitutions below</small>
                </div>
                <div class="card-body p-0">
                    <!-- Item 1 -->
                    <div class="item-row">
                        <div class="row align-items-center">
                            <div class="col-md-5">
                                <strong>Vaporesso XROS 3 - Blue</strong><br>
                                <small class="text-muted">SKU: VP-XROS3-BLU</small>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Ordered</label>
                                <div><strong>50</strong> units</div>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Supplying</label>
                                <input type="number" class="qty-input" value="50" id="qty-1">
                            </div>
                            <div class="col-md-2 text-end">
                                <strong>$1,250.00</strong><br>
                                <small class="text-muted">$25.00 ea</small>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-sm btn-light" onclick="addNote(1)" title="Add Note">
                                    <i class="fa-solid fa-comment"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Item 2 - With Substitution -->
                    <div class="item-row bg-warning bg-opacity-10">
                        <div class="row align-items-center">
                            <div class="col-md-5">
                                <strong>Vaporesso XROS 3 - Red</strong><br>
                                <small class="text-muted">SKU: VP-XROS3-RED</small><br>
                                <span class="substitute-badge mt-1">Out of Stock - Substitute Offered</span>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Ordered</label>
                                <div><strong>30</strong> units</div>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Supplying</label>
                                <input type="number" class="qty-input" value="0" id="qty-2">
                            </div>
                            <div class="col-md-2 text-end">
                                <strong>$0.00</strong><br>
                                <small class="text-muted">$25.00 ea</small>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-sm btn-warning" onclick="offerSubstitute(2)" title="Offer Substitute">
                                    <i class="fa-solid fa-exchange-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mt-2 p-2 bg-white rounded">
                            <small class="text-muted"><i class="fa-solid fa-info-circle"></i> <strong>Suggested:</strong> Vaporesso XROS 3 - Pink (30 units available at same price)</small>
                            <div class="mt-2">
                                <button class="btn btn-success btn-sm" onclick="acceptSubstitute(2)">Accept Substitute</button>
                                <button class="btn btn-light btn-sm" onclick="rejectSubstitute(2)">Keep Original (Wait)</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Item 3 -->
                    <div class="item-row">
                        <div class="row align-items-center">
                            <div class="col-md-5">
                                <strong>SMOK Nord 4 Kit - Black</strong><br>
                                <small class="text-muted">SKU: SM-NRD4-BLK</small>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Ordered</label>
                                <div><strong>40</strong> units</div>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Supplying</label>
                                <input type="number" class="qty-input" value="40" id="qty-3">
                            </div>
                            <div class="col-md-2 text-end">
                                <strong>$1,600.00</strong><br>
                                <small class="text-muted">$40.00 ea</small>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-sm btn-light" onclick="addNote(3)" title="Add Note">
                                    <i class="fa-solid fa-comment"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Item 4 - Partial Supply -->
                    <div class="item-row">
                        <div class="row align-items-center">
                            <div class="col-md-5">
                                <strong>Voopoo Drag X Plus - Silver</strong><br>
                                <small class="text-muted">SKU: VP-DRGX-SLV</small>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Ordered</label>
                                <div><strong>25</strong> units</div>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Supplying</label>
                                <input type="number" class="qty-input" value="15" id="qty-4" onchange="markPartial(4)">
                            </div>
                            <div class="col-md-2 text-end">
                                <strong>$825.00</strong><br>
                                <small class="text-muted">$55.00 ea</small>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-sm btn-light" onclick="addNote(4)" title="Add Note">
                                    <i class="fa-solid fa-comment"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mt-2">
                            <small class="text-warning"><i class="fa-solid fa-exclamation-triangle"></i> Partial supply: 10 units short (will arrive next shipment)</small>
                        </div>
                    </div>
                    
                    <!-- Item 5 -->
                    <div class="item-row">
                        <div class="row align-items-center">
                            <div class="col-md-5">
                                <strong>Replacement Coils Pack (5pcs)</strong><br>
                                <small class="text-muted">SKU: COIL-5PK-001</small>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Ordered</label>
                                <div><strong>100</strong> units</div>
                            </div>
                            <div class="col-md-2">
                                <label class="small text-muted">Supplying</label>
                                <input type="number" class="qty-input" value="100" id="qty-5">
                            </div>
                            <div class="col-md-2 text-end">
                                <strong>$1,200.00</strong><br>
                                <small class="text-muted">$12.00 ea</small>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-sm btn-light" onclick="addNote(5)" title="Add Note">
                                    <i class="fa-solid fa-comment"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="card-footer bg-light">
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="saveChanges()">
                                <i class="fa-solid fa-save"></i> Save Changes
                            </button>
                            <button class="btn btn-light" onclick="resetChanges()">
                                <i class="fa-solid fa-undo"></i> Reset
                            </button>
                        </div>
                        <div class="col-md-6 text-end">
                            <div class="mb-1">
                                <small class="text-muted">Subtotal:</small>
                                <strong>$4,875.00</strong>
                            </div>
                            <div>
                                <small class="text-muted">Shipping:</small>
                                <strong>$15.00</strong>
                            </div>
                            <hr class="my-2">
                            <div>
                                <strong>Total:</strong>
                                <h5 class="mb-0 text-primary">$4,890.00</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Order Notes -->
            <div class="card">
                <div class="card-header bg-light">
                    <h5 class="mb-0">Order Notes & Communication</h5>
                </div>
                <div class="card-body">
                    <div class="notes-section">
                        <div class="d-flex gap-2 mb-2">
                            <i class="fa-solid fa-comment-dots text-primary"></i>
                            <div class="flex-grow-1">
                                <strong>Vape Shed Team</strong> <small class="text-muted">â€¢ Oct 23, 10:45 AM</small>
                                <p class="mb-0 mt-1">Please prioritize this order if possible. Hamilton Central is running low on XROS 3 units. Thank you!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="notes-section">
                        <div class="d-flex gap-2 mb-2">
                            <i class="fa-solid fa-reply text-success"></i>
                            <div class="flex-grow-1">
                                <strong>You (ACME Vape Co.)</strong> <small class="text-muted">â€¢ Oct 23, 2:15 PM</small>
                                <p class="mb-0 mt-1">Confirmed! We'll ship this out today. Red color is out of stock, offering Pink as substitute (see above).</p>
                            </div>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div>
                        <label class="form-label fw-semibold">Add a Note</label>
                        <textarea class="form-control mb-2" rows="3" placeholder="Leave a message for The Vape Shed team..."></textarea>
                        <button class="btn btn-primary btn-sm">
                            <i class="fa-solid fa-paper-plane"></i> Send Note
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4">
            <!-- Tracking Info -->
            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">Tracking Information</h6>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label small text-muted">Carrier</label>
                        <select class="form-select form-select-sm">
                            <option value="">Select carrier...</option>
                            <option>NZ Post</option>
                            <option>CourierPost</option>
                            <option>Aramex</option>
                            <option>DHL</option>
                            <option>FedEx</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small text-muted">Tracking Number</label>
                        <input type="text" class="form-control form-control-sm" placeholder="Enter tracking number">
                    </div>
                    <div class="mb-3">
                        <label class="form-label small text-muted">Expected Delivery</label>
                        <input type="date" class="form-control form-control-sm">
                    </div>
                    <button class="btn btn-success btn-sm w-100">
                        <i class="fa-solid fa-truck"></i> Submit Tracking & Mark as Sent
                    </button>
                </div>
            </div>
            
            <!-- Timeline -->
            <div class="card">
                <div class="card-header bg-light">
                    <h6 class="mb-0">Order Timeline</h6>
                </div>
                <div class="card-body">
                    <div class="timeline">
                        <div class="timeline-item">
                            <small class="text-muted">Oct 23, 2025 10:30 AM</small>
                            <p class="mb-0"><strong>Order Created</strong></p>
                            <small class="text-muted">PO generated by Hamilton Central</small>
                        </div>
                        <div class="timeline-item">
                            <small class="text-muted">Oct 23, 2025 10:35 AM</small>
                            <p class="mb-0"><strong>Sent to Supplier</strong></p>
                            <small class="text-muted">Email notification sent</small>
                        </div>
                        <div class="timeline-item">
                            <small class="text-muted">Oct 23, 2025 2:00 PM</small>
                            <p class="mb-0"><strong>Status: Processing</strong></p>
                            <small class="text-muted">Supplier confirmed order</small>
                        </div>
                        <div class="timeline-item">
                            <small class="text-muted text-primary">Pending...</small>
                            <p class="mb-0"><strong>Awaiting Shipment</strong></p>
                            <small class="text-muted">Add tracking to continue</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Footer will be loaded here by JavaScript -->

<script>
// Copy address function
function copyAddress(address) {
    navigator.clipboard.writeText(address).then(function() {
        alert('âœ… Address copied to clipboard!\n\n' + address);
    }).catch(function(err) {
        console.error('Failed to copy: ', err);
    });
}

// Load header and footer, then show content
document.addEventListener('DOMContentLoaded', function() {
    Promise.all([
        fetch('includes/header.html').then(r => r.text()),
        fetch('includes/footer.html').then(r => r.text())
    ]).then(([headerHtml, footerHtml]) => {
        document.body.insertAdjacentHTML('afterbegin', headerHtml);
        const pageContent = document.getElementById('page-content');
        const contentHtml = pageContent.innerHTML;
        setTimeout(() => {
            const pageBody = document.querySelector('.page-body');
            if (pageBody) {
                pageBody.innerHTML = contentHtml;
            }
            document.body.insertAdjacentHTML('beforeend', footerHtml);
            pageContent.remove();
        }, 50);
    });
});

function uploadInvoice() {
    alert('Upload Invoice\n\nThis would open a file upload dialog to attach:\n- Invoice PDF\n- Packing slip\n- Other documents');
}

function submitTracking() {
    alert('Submit Tracking\n\nThis would:\n1. Add carrier and tracking number\n2. Set expected delivery date\n3. Automatically mark order as "Sent"');
}

function markComplete() {
    if (confirm('Mark this order as Sent?\n\nThis will notify The Vape Shed that items are on their way.')) {
        alert('Order marked as SENT!\n\nNotification sent to store.');
    }
}

function downloadPDF() {
    alert('Downloading PO PDF...\n\nThis would generate and download the purchase order document.');
}

function addNote(itemId) {
    const note = prompt('Add a note for item ' + itemId + ':');
    if (note) {
        alert('Note added: ' + note);
    }
}

function offerSubstitute(itemId) {
    alert('Offer Substitute\n\nThis would open a product picker to select an alternative item.');
}

function acceptSubstitute(itemId) {
    alert('Substitute accepted! Quantity updated.');
}

function rejectSubstitute(itemId) {
    alert('Original product kept. Order will wait for restock.');
}

function markPartial(itemId) {
    const qty = document.getElementById('qty-' + itemId).value;
    alert('Partial supply noted: ' + qty + ' units\n\nPlease add a note explaining when remaining units will arrive.');
}

function saveChanges() {
    alert('Changes saved!\n\nUpdated quantities:\n- Item 1: 50 units\n- Item 2: 0 units (substitute offered)\n- Item 3: 40 units\n- Item 4: 15 units (partial)\n- Item 5: 100 units');
}

function resetChanges() {
    if (confirm('Reset all changes to original values?')) {
        document.getElementById('qty-1').value = 50;
        document.getElementById('qty-2').value = 30;
        document.getElementById('qty-3').value = 40;
        document.getElementById('qty-4').value = 25;
        document.getElementById('qty-5').value = 100;
    }
}
</script>

</body>
</html>
